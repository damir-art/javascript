# Делегирование событий

Благодаря всплытию/погружению можно использовать делегирование. Делегирование используется при однотипном событии на разных элементах.

Делегирование на всплытие:
- вешаем обработчик не на элементы, а на обертку элементов
- проверяем `target` на каком элементе произошло событие (например клик и он всплывает до обертки)

Делегирование на захват:
- например создаём обработчик события `invalid` (но оно не всплывает), для сотен инпутов
- вешаем событие на форму (клик по submit)
- добавляем `true` в addEventListener()

Делегирование подходит только для очень простых обработчиков, где `target` - какой именно элемент из множества, не важен.

**Делегирование событий** &ndash; это оптимизация, улучшение производительности кода JavaScript. Суть заключается в том, чтобы добавить прослушку событий не на каждый элемент прослушки, а на их общую обёртку.

* **getElementById()** &ndash; самый быстрый метод при работе с DOM-деревом.

## Когда делегировать, а когда нет?
- (да) много идентичных обработчиков на элементах, которые постоянно удаляются и добавляются
- (нет) много похожих обработчиков, отличающиеся набором фиксированных данных для разных элементов

## Не оптимизированный код

    var ps = document.querySelectorAll('p')

    for(var i = 0; i < ps.length; i++ ) {
        ps[i].addEventListener('click', function(event){
            event.target.style.color = 'red'
        })
    }

## Оптимизированный код
Прослушка `addEventListener()` висит только на одном элементе *(обертке)*, а не на множестве элементов.

Переменная `tagName` содержит в себе имя тега в нижнем регистре.

    document.getElementById('wrapper').addEventListener('click', function () {
        var tagName = event.target.tagName.toLowerCase()

        // Меняем цвет по имени тега
        if(tagName === 'p') {
            event.target.style.color = 'green'
        }
        console.log(tagName)

        // меняем цвет по имени класса
        if(event.target.classList.contains('class_name')) {
            event.target.style.color = 'orange'
        }
    })
